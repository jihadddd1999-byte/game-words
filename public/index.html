<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>โก ูุนุจุฉ ุงููููุงุช ุงูุณุฑูุนุฉ โก</title>
  <link rel="stylesheet" href="style.css" />
  <script src="/socket.io/socket.io.js" defer></script>
  <script src="game.js" defer></script>
</head>
<body>
  <main id="app-container">
    <header>
      <h1>โก ูุนุจุฉ ุงููููุงุช ุงูุณุฑูุนุฉ โก</h1>
    </header>

    <section class="game-section">
      <div class="word-box" id="current-word">ุฌุงุฑู ุงูุชุญููู...</div>

      <input type="text" id="input-answer" placeholder="ุงูุชุจ ุงููููุฉ ููุง" autocomplete="off" spellcheck="false" />

      <!-- ููุช ุงูุฅุฌุงุจุฉ ุฃุณูู ุญูู ุงูุฅุฌุงุจุฉ -->
      <div id="answer-time" class="answer-time"></div>

      <div class="points-row">
        <div id="points-display">ุงูููุงุท: 0</div>
        <div id="progress-wrapper">
          <div id="progress-bar">
            <span id="progress-text">0%</span>
          </div>
        </div>
      </div>
    </section>

    <section class="controls">
      <button id="btn-chat">๐ฌ ุงูุดุงุช <span id="chat-badge" hidden>โข</span></button>
      <button id="btn-change-name">โ๏ธ ุชุบููุฑ ุงูุงุณู</button>
      <input type="color" id="name-color-picker" title="ุงุฎุชุฑ ููู ุงุณูู" />
      <button id="btn-instructions">๐ ุชุนูููุงุช ุงููุนุจุฉ</button>
      <button id="btn-zizo">โค๏ธ ูุนุจุฉ ุฒูุฒู</button>
      <button id="btn-night" title="ุงููุถุน ุงููููู">๐ ูููู</button>
      <button id="btn-stats" title="ุฅุญุตุงุฆูุงุช ุงููุงุนุจ">๐ ุงูุฅุญุตุงุฆูุงุช</button>
      <button id="btn-vote" title="ุงูุชุตููุช ูุงุฎุชูุงุฑ ููุท ุงููุนุจ">๐ณ๏ธ ุชุตููุช ููุท</button>
      <button id="btn-powerups" title="ุงูุจุงูุฑ-ุฃุจุฒ">โก ูุฏุฑุงุช</button>
      <button id="btn-team" title="ุชุจุฏูู ูุถุน ุงููุฑู">๐ฅ ูุฑูู</button>
    </section>

    <section id="players-list-container">
      <h2>๐ ุงููุชุตุฏุฑูู</h2>
      <ul id="players-list"></ul>
    </section>

    <!-- ุงูุดุงุช -->
    <aside id="chat-container" hidden>
      <header>
        <h3>ุงูุดุงุช</h3>
        <div>
          <button id="btn-notifications-toggle" title="ุชุดุบูู/ุฅููุงู ุฅุดุนุงุฑุงุช ุงูุดุงุช">๐</button>
          <button id="btn-close-chat">โ๏ธ</button>
        </div>
      </header>
      <section id="chat-messages"></section>
      <form id="chat-form">
        <input type="text" id="chat-input" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." required maxlength="120" />
        <button type="submit" id="btn-send-chat">ุฅุฑุณุงู</button>
      </form>
    </aside>

    <!-- ุงูุฅุญุตุงุฆูุงุช -->
    <dialog id="stats-dialog">
      <h3>๐ ุฅุญุตุงุฆูุงุช ุงููุงุนุจูู</h3>
      <table id="stats-table">
        <thead>
          <tr>
            <th>ุงููุงุนุจ</th>
            <th>ุฃูู ูุฏุฉ (ุซ)</th>
            <th>ูุฌููุน ุงูููุงุท</th>
            <th>ุนุฏุฏ ูุฑุงุช ุงูููุฒ</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <button id="close-stats">ุฅุบูุงู</button>
    </dialog>

    <!-- ุงูุชุตููุช -->
    <dialog id="vote-dialog">
      <h3>๐ณ๏ธ ุงุฎุชุฑ ููุท ุงููุนุจ</h3>
      <form id="vote-form">
        <label><input type="radio" name="mode" value="missing" checked> ูููุงุช ูุงูุตุฉ ุงูุญุฑูู</label><br>
        <label><input type="radio" name="mode" value="reversed"> ูููุงุช ูุนููุณุฉ</label><br>
        <label><input type="radio" name="mode" value="flash"> ูููุงุช ุชุธูุฑ ูุชุฎุชูู</label><br>
        <label><input type="radio" name="mode" value="playerlist"> ูู ูุงุนุจ ูุถุน ูฅ ูููุงุช</label>
        <menu>
          <button type="button" id="cancel-vote">ุฅูุบุงุก</button>
          <button type="submit" id="submit-vote">ุชุตููุช</button>
        </menu>
      </form>
    </dialog>

    <!-- ุฅุดุนุงุฑ ุฑุณุงุฆู ุฌุฏูุฏ -->
    <div id="new-message-toast" hidden>
      ูุฏูู ุฑุณุงูุฉ ุฌุฏูุฏุฉ! <button id="open-chat-from-toast">ุนุฑุถ</button>
    </div>

  </main>

  <script>
    // ููุน ุงูุณููุจ ุจุงุณุชุฎุฏุงู Wake Lock API
    let wakeLock = null;
    async function requestWakeLock() {
      try {
        if ('wakeLock' in navigator) {
          wakeLock = await navigator.wakeLock.request('screen');
          wakeLock.addEventListener('release', () => {
            console.log('Wake Lock ุชู ุฅุตุฏุงุฑู');
          });
          console.log('Wake Lock ููุนูู');
        }
      } catch (err) {
        console.error(`${err.name}, ${err.message}`);
      }
    }
    requestWakeLock();
    document.addEventListener('visibilitychange', () => {
      if (wakeLock !== null && document.visibilityState === 'visible') {
        requestWakeLock();
      }
    });
  </script>
</body>
</html>
